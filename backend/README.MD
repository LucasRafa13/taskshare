# TaskShare Backend ğŸ¯

Backend da aplicaÃ§Ã£o TaskShare - Sistema de gerenciamento colaborativo de tarefas desenvolvido como desafio tÃ©cnico.

## ğŸ“‹ Stack TÃ©cnica

- **Runtime:** Node.js 20
- **Linguagem:** TypeScript
- **Framework:** Express.js (puro)
- **ORM:** Prisma
- **Banco de dados:** PostgreSQL
- **AutenticaÃ§Ã£o:** JWT
- **ContainerizaÃ§Ã£o:** Docker + Docker Compose
- **Testes:** Mocha + Chai + Supertest
- **Linting:** ESLint + Prettier

## ğŸš€ Funcionalidades

- [x] ConfiguraÃ§Ã£o base do projeto
- [x] Docker setup completo
- [x] Banco PostgreSQL configurado
- [x] Prisma ORM configurado
- [x] API bÃ¡sica funcionando
- [x] Health check endpoint
- [x] Sistema de autenticaÃ§Ã£o (registro/login)
- [x] CRUD de listas de tarefas
- [x] CRUD de tarefas
- [x] Sistema de compartilhamento
- [x] ComentÃ¡rios em tarefas
- [x] Testes automatizados

## ğŸ› ï¸ InstalaÃ§Ã£o e ExecuÃ§Ã£o

### PrÃ©-requisitos

- Docker e Docker Compose
- Node.js 20+ (opcional, para desenvolvimento local)

### 1. Clone do repositÃ³rio

```bash
git clone https://github.com/LucasRafa13/taskshare
cd taskshare/backend
```

### 2. ConfiguraÃ§Ã£o do ambiente

```bash
cp .env.example .env

nano .env
```

### 3. ExecuÃ§Ã£o com Docker (Recomendado)

```bash
docker compose up postgres -d

npm install
npx prisma generate
npx prisma migrate dev --name init

docker compose up app-dev
```

### 4. ExecuÃ§Ã£o local (Alternativa)

```bash
# Instalar dependÃªncias
npm install

# Configurar banco (Docker deve estar rodando)
npx prisma generate
npx prisma migrate dev

# Executar em modo desenvolvimento
npm run dev
```

## ğŸ“¡ Endpoints DisponÃ­veis

### Status da API

- `GET /api` - InformaÃ§Ãµes gerais da API
- `GET /api/health` - Health check

### AutenticaÃ§Ã£o

- `POST /api/auth/register` - Registro de usuÃ¡rio
- `POST /api/auth/login` - Login
- `POST /api/auth/logout` - Logout
- `GET /api/auth/me` - Dados do usuÃ¡rio logado

### Listas

- `GET /api/lists` - Listar todas as listas
- `POST /api/lists` - Criar nova lista
- `PUT /api/lists/:id` - Editar lista
- `DELETE /api/lists/:id` - Excluir lista
- `POST /api/lists/:id/share` - Compartilhar lista
- `DELETE /api/lists/:id/share/:userId` - Remover compartilhamento

### Tarefas

- `GET /api/lists/:listId/tasks` - Listar tarefas
- `POST /api/lists/:listId/tasks` - Criar tarefa
- `PUT /api/tasks/:id` - Editar tarefa
- `DELETE /api/tasks/:id` - Excluir tarefa
- `PATCH /api/tasks/:id/toggle` - Marcar/desmarcar como concluÃ­da

## ğŸ—„ï¸ Estrutura do Banco

### Modelos principais:

- **User** - UsuÃ¡rios do sistema
- **TaskList** - Listas de tarefas
- **Task** - Tarefas individuais
- **ListShare** - Compartilhamento de listas
- **Comment** - ComentÃ¡rios em tarefas
- **RefreshToken** - Tokens de autenticaÃ§Ã£o

Ver detalhes completos em `prisma/schema.prisma`

## ğŸ³ Docker

### ServiÃ§os disponÃ­veis:

- **postgres** - Banco PostgreSQL
- **app-dev** - AplicaÃ§Ã£o em modo desenvolvimento
- **app-prod** - AplicaÃ§Ã£o em modo produÃ§Ã£o
- **pgadmin** - Interface de administraÃ§Ã£o do banco

### Comandos Ãºteis:

```bash

# Subir aplicaÃ§Ã£o inteira de uma vez ( Hot Reload )
docker compose up app-dev

# Subir apenas o banco
docker compose up postgres -d

# ProduÃ§Ã£o
docker compose --profile production up app-prod

# PgAdmin (desenvolvimento)
docker compose --profile development up pgadmin

# Ver logs
docker compose logs app-dev

# Parar tudo
docker compose down

# Limpar volumes (âš ï¸ apaga dados)
docker compose down -v
```

## ğŸ§ª Testes

```bash
# Executar todos os testes
npm test

# Testes em modo watch
npm run test

```

## ğŸ“Š Banco de Dados

### Comandos Prisma:

```bash
# Gerar cliente
npx prisma generate

# Rodar migrations
npx prisma migrate dev

# Reset do banco
npx prisma migrate reset

# Visualizar dados
npx prisma studio

# Push schema (sÃ³ desenvolvimento)
npx prisma db push
```

### PgAdmin (Interface grÃ¡fica):

- **URL:** http://localhost:5050
- **Email:** admin@taskshare.com
- **Senha:** admin123

## ğŸ”§ Scripts DisponÃ­veis

```bash
npm run dev          # Desenvolvimento com hot reload
npm run build        # Build para produÃ§Ã£o
npm run start        # Iniciar produÃ§Ã£o
npm run test             # Executar testes
npm run lint         # Verificar cÃ³digo
npm run format       # Formatar cÃ³digo
```

## ğŸŒ VariÃ¡veis de Ambiente

Principais variÃ¡veis (ver `.env.example` para lista completa):

```bash
# AplicaÃ§Ã£o
NODE_ENV=development
PORT=3000

# Banco de dados
DATABASE_URL="postgresql://taskshare_user:taskshare_password@localhost:5432/taskshare"

# JWT
JWT_SECRET="sua-chave-secreta-aqui"
JWT_EXPIRES_IN=7d

# CORS
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:5173"
```

## ğŸ“ Estrutura do Projeto

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/          # ConfiguraÃ§Ãµes (banco, env)
â”‚   â”œâ”€â”€ controllers/     # Controladores das rotas
â”‚   â”œâ”€â”€ middleware/      # Middlewares (auth, validaÃ§Ã£o)
â”‚   â”œâ”€â”€ routes/          # DefiniÃ§Ã£o das rotas
â”‚   â”œâ”€â”€ services/        # LÃ³gica de negÃ³cio
â”‚   â”œâ”€â”€ types/           # Tipos TypeScript
â”‚   â”œâ”€â”€ utils/           # UtilitÃ¡rios (JWT, hash)
â”‚   â”œâ”€â”€ app.ts           # ConfiguraÃ§Ã£o Express
â”‚   â””â”€â”€ server.ts        # Entrada da aplicaÃ§Ã£o
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma    # Schema do banco
â”‚   â””â”€â”€ migrations/      # HistÃ³rico de migrations
â”œâ”€â”€ tests/               # Testes automatizados
â”œâ”€â”€ docker-compose.yml   # OrquestraÃ§Ã£o Docker
â”œâ”€â”€ Dockerfile           # Imagem Docker
â””â”€â”€ README.md
```

## ğŸ”’ SeguranÃ§a

- Helmet.js para headers de seguranÃ§a
- CORS configurado
- Senhas hasheadas com bcrypt
- JWT para autenticaÃ§Ã£o
- ValidaÃ§Ã£o de entrada com Joi
- Rate limiting (a implementar)

## ğŸ“ˆ Monitoramento

- Health check em `/api/health`
- Logs estruturados com Morgan
- MÃ©tricas Docker
- Error tracking (a implementar)

## ğŸš€ Deploy

### ProduÃ§Ã£o com Docker:

```bash
# Build da imagem
docker build -t taskshare-backend .

# Executar produÃ§Ã£o
docker compose --profile production up
```

### VariÃ¡veis importantes para produÃ§Ã£o:

- `NODE_ENV=production`
- `JWT_SECRET` (chave forte)
- `DATABASE_URL` (banco de produÃ§Ã£o)

## ğŸ‘¨â€ğŸ’» Desenvolvedor

Desenvolvido como desafio tÃ©cnico para demonstrar habilidades em:

- Node.js + TypeScript
- Express.js
- Prisma ORM
- PostgreSQL
- Docker
- Arquitetura REST

---
